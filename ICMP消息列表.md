* **类别0： 正常**

| 类型 | 代码 |   描述   | 处理方法 | 消息发出方 |   说明   | 查询 | 差错 |
| :--: | :--: | :------: | :------: | :--------: |  :-----: | :--: | :--: |
|  #0  |  0   | 回显应答 | 用户进程 |  路由、PC  | 正常业务 |  查  |      |

* **类别3： 目的不可达类型**

| 类型 | 代码 |            描述             |         处理方法         |    消息发出方    |                             说明                             | 查询 | 差错 |
| :--: | :--: | :-------------------------: | :----------------------: | :--------------: | :----------------------------------------------------------: | :--: | :--: |
|  #3  |      |         目的不可达          |                          |            |                                                              |      |      |
| #3 |  0   |         网络不可达          |      无路由到达主机      |   路由？   | 老版本BSD产生一个主机不可达或者网络不可达，取决于目的端是否在一个局域子网。4.4BSD只产生主机不可达 |      |  错  |
| #3 |  1   |         主机不可达          |      无路由到达主机      |    路由    |  路由收到一份IP数据报但又不能转发时，发送主机不可达差错报文  |      |  错  |
| #3 |  2   |         协议不可达          |        连接被拒绝        |     PC     |                                                              |      |  错  |
| #3 |  3   |         端口不可达          |        连接被拒绝        |     PC     | UDP的规则之一是：如果收到UDP数据报而且目的端口与某个正在使用的进程不相符，那么UDP返回一个ICMP不可达报文。 |      |  错  |
| #3 |  4   | 需要分片但设置了不分片比特  |         报文太长         |    路由    | 路由收到一份需要分片的数据报，而在IP首部设置了不分片（DF）标志 |      |  错  |
| #3 |  5   |        源站选路失败         |      无路由到达主机      |    路由    |           严格的源站选路时，路由对TTL进行严格检查            |      |  错  |
| #3 |  6   |       目的网络不认识        |      无路由到达主机      |    路由    |                                                              |      |  错  |
| #3 |  7   |       目的主机不认识        |      无路由到达主机      |    路由    |                                                              |      |  错  |
| #3 |  8   |    源主机被隔离（作废）     |      无路由到达主机      |            |                                                              |      |      |
| #3 |  9   |     目的网络被强制禁止      |      无路由到达主机      |    路由    |                                                              |      |  错  |
| #3 |  10  |     目的主机被强制禁止      |      无路由到达主机      |    路由    |                                                              |      |  错  |
| #3 |  11  | 由于服务类型TOS，网络不可达 |      无路由到达主机      |    路由    |  路由收到一份IP数据报但又不能转发时，发送主机不可达差错报文  |      |  错  |
| #3 |  12  | 由于服务类型TOS，主机不可达 |      无路由到达主机      |    路由    |  路由收到一份IP数据报但又不能转发时，发送主机不可达差错报文  |      |  错  |
| #3 |  13  |  由于过滤，通信被强制禁止   |           忽略           |   路由？   |                                                              |      |  错  |
| #3 |  14  |          主机越权           |           忽略           |   路由？   |                                                              |      |  错  |
| #3 |  15  |       优先权中止生效        |           忽略           |   路由？   |                                                              |      |  错  |



* **类别4： 源端抑制**

| 类型 | 代码 |   描述   |         处理方法         | 消息发出方 |                             说明                             | 查询 | 差错 |
| :--: | :--: | :------: | :----------------------: | :--------: | :----------------------------------------------------------: | :--: | :--: |
|  #4  |  0   | 源端抑制 | TCP由内核处理，UDP则忽略 |  路由、PC  | 当路由器或主机由于拥塞而丢弃数据报时，就向源站发送源站抑制报文，使源站知道应当将数据报的发送速率放慢。 |      |  错  |


* **类别5： 重定向**

  路由器将改变路由报文发送给主机，让主机知道下次应将数据报发送给另外的路由器。

| 类型 | 代码 | 描述                         | 处理方法       | 消息发出方 | 说明 | 查询 | 差错 |
| ---- | ---- | ---------------------------- | -------------- | ---------- | ---- | ---- | ---- |
| #5   | 0    | 对网络重定向                 | 内核更新路由表 | 路由       |      |      | 错   |
| #5   | 1    | 对主机重定向                 | 内核更新路由表 | 路由       |      |      | 错   |
| #5   | 2    | 对服务类型重定向和网络重定向 | 内核更新路由表 | 路由       |      |      | 错   |
| #5   | 3    | 对服务类型重定向和主机重定向 | 内核更新路由表 | 路由       |      |      | 错   |



* **类别8、9、10**

| 类型 | 代码 | 描述       | 处理方法 | 消息发出方 | 说明 | 查询 | 差错 |
| ---- | ---- | ---------- | -------- | ---------- | ---- | ---- | ---- |
| #8   | 0    | 回显请求   |          | PC         |      | 查   |      |
| #9   | 0    | 路由器通告 | 用户进程 | 路由       |      | 查   |      |
| #10  | 0    | 路由器请求 | 用户进程 | 路由       |      | 查   |      |




* **类别11 ：超时**

当路由器收到生存时间为零的数据报时，除丢弃该数据报外，还要向源站发送时间超过报文。当目的站在预先规定的时间内不能收到一个数据报的全部数据报片时，就将已收到的数据报片都丢弃，并向源站发送时间超过报文。

| 类型 | 代码 |            描述             | 处理方法 | 消息发出方 | 说明 | 查询 | 差错 |
| :--: | :--: | :-------------------------: | :------: | :--------: | :--: | :--: | :--: |
| #11  |  0   |       传输生存时间为0       | 用户进程 |    路由    |      |      |  错  |
| #11  |  1   | 在数据报组装期间生存时间为0 | 用户进程 |    路由    |      |      |  错  |



* **类别12 ：参数问题**

当路由器或目的主机收到的数据报的首部中的字段的值不正确时，就丢弃该数据报，并向源站发送参数问题报文。

| 类型 | 代码 |      描述      |  处理方法  | 消息发出方 | 说明 | 查询 | 差错 |
| :--: | :--: | :------------: | :--------: | :--------: | :--: | :--: | :--: |
| #12  |  0   |   坏的IP首部   | 协议不可用 |  路由、PC  |      |      |  错  |
| #12  |  1   | 缺少必须的选项 | 协议不可用 |  路由、PC  |      |      |  错  |



* **类别13、14、15、16、17、18**

***关于时间戳***   并不是所有主机都会回应 ICMP 时间戳请求，大量的 ICMP 请求会造成服务器的负担，为了防止被人利用，应该把服务器上的这些功能关掉。

***注：**第15和第16类型ICMP消息已作废

| 类型 | 代码 | 描述             | 处理方法     | 消息发出方 | 说明                                                         | 查询 | 差错 |
| ---- | ---- | ---------------- | ------------ | ---------- | ------------------------------------------------------------ | ---- | ---- |
| #13  | 0    | 时间戳请求       | 内核产生应答 | PC         |                                                              | 查   |      |
| #14  | 0    | 时间戳应答       | 用户进程     | PC         |                                                              | 查   |      |
| #15  | 0    | 信息请求（作废） | 忽略         |            |                                                              | 查   |      |
| #16  | 0    | 信息应答（作废） | 用户进程     |            |                                                              | 查   |      |
| #17  | 0    | 地址掩码请求     | 内核产生应答 | PC         | 用于无盘系统在引导过程中获取自己的子网掩码                   | 查   |      |
| #18  | 0    | 地址掩码应答     | 用户进程     | 路由、PC   | RFC规定除非系统是地址掩码的授权代理，否则不能发送地址掩码应答 | 查   |      |

​    